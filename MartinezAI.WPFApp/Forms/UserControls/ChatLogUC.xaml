<UserControl x:Class="MartinezAI.WPFApp.Forms.UserControls.ChatLogUC"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:MartinezAI.WPFApp.Forms.UserControls"
             xmlns:vm="clr-namespace:MartinezAI.WPFApp.ViewModels.UserControls"
             xmlns:ap="clr-namespace:MartinezAI.WPFApp.AttachedProperties"
             xmlns:cef="clr-namespace:CefSharp.Wpf;assembly=CefSharp.Wpf"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             d:DataContext="{d:DesignInstance vm:ChatLogUCViewModel, IsDesignTimeCreatable=True}">

    <Grid HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">

        <ScrollViewer HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      VerticalScrollBarVisibility="Auto">
            <ItemsControl x:Name="ChatLogHistory"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Stretch"
                          ItemsSource="{Binding ChatLogMessages}"
                          Margin="0,0,10,0">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Margin="0,5"
                                HorizontalAlignment="Stretch">
                            <Grid HorizontalAlignment="Stretch">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" 
                                           Text="{Binding Owner, StringFormat={}{0}:}"
                                           FontWeight="Bold"
                                           FontSize="14"
                                           Foreground="{DynamicResource MainFontForegroundBrush}"/>

                                <Button Grid.Row="0" 
                                        Content="&#x2699;"
                                        HorizontalAlignment="Right"
                                        Style="{DynamicResource IconButtonStyle}"
                                        Click="DevTools_Click" />

                                <Border Grid.Row="1"
                                        HorizontalAlignment="Stretch"
                                        BorderBrush="{DynamicResource ContainerBorderBrush}"
                                        BorderThickness="2"
                                        CornerRadius="8"
                                        Padding="5">
                                    <cef:ChromiumWebBrowser ap:CefAttachedProperties.Html="{Binding Content}"
                                                            ap:CefAttachedProperties.IsContentComplete="{Binding IsContentComplete}"
                                                            HorizontalAlignment="Stretch"
                                                            Loaded="ChromiumWebBrowser_Loaded"
                                                            LoadingStateChanged="ChromiumWebBrowser_LoadingStateChanged" />
                                </Border>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
        
    </Grid>

</UserControl>
